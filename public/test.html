<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test</title>

  </head>

  <body>
    <div id="message">
      <h2>404</h2>
      <h1>Page Not Found</h1>
      <p>The specified file was not found on this website. Please check the URL for mistakes and try again.</p>
      <h3>Why am I seeing this?</h3>
      <p>This page was generated by the Firebase Command-Line Interface. To modify it, edit the <code>404.html</code> file in your project's configured <code>public</code> directory.</p>
    </div>
  </body>
  <button id="btn">Modify Data</button>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-firestore.js"></script>
  <script src="src/config.js"></script>
  <script type="text/javascript" src="src/firestoreInterface.js"></script>
  <script type="text/javascript" >
        // Data in members collection
        publicData = {
            ambassador : true,
            current_address : {
                administrative_area_level_1 : "Newfoundland",  
                country: "Canada",  
                lat: 21,  
                lng: -103,
                locality: "St. John's"
            },
            date_created : 82340984523,
            first_name : "Matthew",
            grad_year: "Noseworthy",  
            hometown_address : {
                administrative_area_level_1 : "Newfoundland",  
                country: "Canada",  
                lat: 21,  
                lng: -103,
                locality: "St. John's"
            }
        }
        modifyData = {
          
            industry: "Embedded Software",
            last_name:"Noseworthy",
            linkedin_profile:"https://linked.com/in/mnoseworthy",
            program:"Electrical",
            school:"Memorial University",
            status:"Student",
        

            approved : true,
            email : "mjn3277777777@notmun.ai",
            interests : {
                connect: true,
                learn: true,
                mentor: true,
                organize: true,
                support: true
            },
            shared: true
        };
        myData = {
        ambassador : false,
        approved : true,
        comments : "",
        current_address : {
          "administrative_area_level_1" : "Ontario",
          "country" : "Canada",
          "lat" : 45.4215296,
          "lng" : -75.69719309999999,
          "locality" : "Ottawa"
        },
        date_created : 1519014182834,
      email : "mjn327@mun.ca",
        first_name : "Matthew",
        grad_year : 2019,
        hometown_address : {
          "administrative_area_level_1" : "Newfoundland and Labrador",
          "country" : "Canada",
          "lat" : 47.5083178,
          "lng" : -52.99406049999999,
          "locality" : "Conception Bay South"
        },
        industry : "Technology",
        interests : {
          "connect" : true,
          "learn" : true,
          "mentor" : true,
          "organize" : true,
          "support" : true
        },
        last_name : "Noseworthy",
        linkedin_profile : "https://www.linkedin.com/in/mnoseworthy",
        privacy : "public",
        program : "Bachelor of electoral engineer",
        public_uid : "-L6NDTqCb3An_cE5p1Ah",
        school : "Memorial Universiry of Newfoundland",
        status : "Student"
        }
console.log(myData);
    var doc = new memberDocument(myData);
    
    $("#btn").click( function(){
      console.log("Attempting modifcation")
      doc.modifyDocument(modifyData);
    });

/********************
* Interface reference
********************/
// Will hold a refernece to the created firebase reference, giving access to
// the interface in our callback functions below.
var _firebase_interface;

/*****************************************************  
* Register event callbacks & implement element callbacks
******************************************************/
// Init auth on load web page event
$(document).ready(function(){
    initApp();
});

// Code entry point, started when page is finished loading
function initApp()
{
  // Initialize config handler, this does nothing more than parse the config object
  // in the config handler file and return the object required for this page to the callback,
  // where the callback is just our namespace below
  new configHandler( registration_namespace, 'registration' );
}
/********************************
* Main namespace and control flow
*********************************/

// This is where we implement the main logic for our page, and we pass this function to
// the configHandler constructor as it's callback - i.e. it's started once config is finished loading
var registration_namespace = function (config) 
{
  // This is passed to the firebase interface as it's callback, and won't be executed until
  // the interface has connected to the database and figured out the user type
  var firebaseLoaded = function( fbi ) {
      // Validate success
      if ( ! fbi ) 
      {
          console.log("An error has occured while initializing the firebase interface");
          return false;
      }
      // store interface object globally
      _firebase_interface = fbi;
      // Switch based on user type, this is where we redirect different types
      // of users to other pages if they don't belong here or whatever
      switch ( fbi.userType ) 
      {
          case "Moderator":
            console.log("User is Moderator")
          case "Member":
              console.log("User is member");
              break;
          case "Unregistered Member":
              console.log("User unregistered")
              _firebase_interface.writeMemberDocument(doc, true, true);
              break;
          case "Anonymous":
              console.log("Can this user type exist?")
              break;
          default:
              console.log("User type undefined? How did we get here ...");
              return false;
      }



  } // end firebase callback
  
  // Running the initializer returns the database interface object to the callback
  // or False if an error occured.
  // We pass the firebase interface the firebase section of our loaded config
  new firebase_interface(config.firebase.config, firebaseLoaded);
}; // end namespace

  </script>
</html>
